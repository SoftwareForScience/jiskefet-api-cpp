#
# Jiskefet
# Running with /api prefix
#
# OpenAPI spec version: 1.0.0
#
# https://github.com/swagger-api/swagger-codegen.git
#
# NOTE: Auto generated by the swagger code generator program.

cmake_minimum_required (VERSION 2.8)

#PROJECT's NAME
project(JiskefetApiCpp)


# THE LOCATION OF OUTPUT BINARIES
#set(CMAKE_LIBRARY_DIR ${PROJECT_SOURCE_DIR}/lib)
#set(LIBRARY_OUTPUT_PATH ${CMAKE_LIBRARY_DIR})

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++17 -g")

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Release)
endif()

# BUILD TYPE
message("A ${CMAKE_BUILD_TYPE} build configuration is detected")

# Update require components as necessary
find_package(Boost 1.45.0 REQUIRED COMPONENTS thread system regex date_time program_options filesystem)
find_package(OpenSSL 1.0.0 REQUIRED)
find_library(CPPREST_LIBRARIES cpprest PATHS ${CPPREST_LIB} PATH_SUFFIXES lib lib64)

# build and set path to cpp rest sdk
set(CPPREST_INCLUDE_DIR ${CPPREST_ROOT}/include)

if( NOT DEFINED CPPREST_ROOT )
    message( FATAL_ERROR "Failed to find cpprest SDK (or missing components). Double check that \"CPPREST_ROOT\" is properly set")
endif( NOT DEFINED CPPREST_ROOT )

include_directories(${PROJECT_SOURCE_DIR} api model ${CPPREST_INCLUDE_DIR} ${Boost_INCLUDE_DIRS} ${OPENSSL_INCLUDE_DIR})

#SUPPORTING FILES
set(SUPPORTING_FILES 
    "ApiClient"
    "ApiConfiguration"
    "ApiException"
    "HttpContent"
    "IHttpBody"
    "JsonBody"
    "ModelBase"
    "MultipartFormData"
    "Object")

#SOURCE FILES
file(GLOB SOURCE_FILES "api/*"  "model/*" "jiskefet/*")

add_library(${PROJECT_NAME} ${SUPPORTING_FILES} ${SOURCE_FILES})

add_executable(jiskefet-api-cpp-example Example.cpp)
target_link_libraries(jiskefet-api-cpp-example ${PROJECT_NAME} ${CPPREST_LIBRARIES} ${Boost_LIBRARIES} ${OPENSSL_LIBRARIES} pthread)

install(TARGETS jiskefet-api-cpp-example JiskefetApiCpp
    RUNTIME DESTINATION bin
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib/static)
install(FILES
    ApiClient.h
    ApiConfiguration.h
    HttpContent.h
    IHttpBody.h
    JsonBody.h
    ModelBase.h
    MultipartFormData.h
    Object.h
    DESTINATION include/)
install(FILES
    api/AttachmentsApi.h
    api/AuthenticationApi.h
    api/FlpApi.h
    api/LogsApi.h
    api/OverviewApi.h
    api/RunsApi.h
    api/SettingApi.h
    api/SubsystemsApi.h
    api/UsersApi.h
    DESTINATION include/api/)
install(FILES
    model/CreateAttachmentDto.h
    model/CreateLogDto.h
    model/CreateRunDto.h
    model/CreateSubSystemPermissionDto.h
    model/LinkLogToRunDto.h
    model/LinkRunToLogDto.h
    model/PatchFlpDto.h
    model/PatchRunDto.h
    model/SubSystem.h
    model/User.h
    DESTINATION include/model/)
install(FILES
    jiskefet/CreateLogParameters.h
    jiskefet/CreateRunParameters.h
    jiskefet/GetLogsParameters.h
    jiskefet/GetRunsParameters.h
    jiskefet/JiskefetApi.h
    jiskefet/JiskefetFactory.h
    jiskefet/JiskefetInterface.h
    jiskefet/Log.h
    jiskefet/LogOrigin.h
    jiskefet/LogSubtype.h
    jiskefet/OrderDirection.h
    jiskefet/Run.h
    jiskefet/RunQuality.h
    jiskefet/RunType.h
    DESTINATION include/jiskefet/)
