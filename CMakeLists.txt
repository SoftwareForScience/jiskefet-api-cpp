#
# Jiskefet
# Running with /api prefix
#
# OpenAPI spec version: 1.0.0
#
# https://github.com/swagger-api/swagger-codegen.git
#
# NOTE: Auto generated by the swagger code generator program.

cmake_minimum_required (VERSION 2.8)

#PROJECT's NAME
project(JiskefetApiCpp)


# THE LOCATION OF OUTPUT BINARIES
#set(CMAKE_LIBRARY_DIR ${PROJECT_SOURCE_DIR}/lib)
#set(LIBRARY_OUTPUT_PATH ${CMAKE_LIBRARY_DIR})

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++17 -g")

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Release)
endif()

# BUILD TYPE
message("A ${CMAKE_BUILD_TYPE} build configuration is detected")

# Update require components as necessary
find_package(Boost 1.45.0 REQUIRED COMPONENTS thread system regex date_time program_options filesystem)
find_package(OpenSSL 1.0.0 REQUIRED)
find_library(CPPREST_LIBRARIES cpprest PATHS ${CPPREST_LIB} PATH_SUFFIXES lib lib64)

# build and set path to cpp rest sdk
set(CPPREST_INCLUDE_DIR ${CPPREST_ROOT}/include)

if( NOT DEFINED CPPREST_ROOT )
    message( FATAL_ERROR "Failed to find cpprest SDK (or missing components). Double check that \"CPPREST_ROOT\" is properly set")
endif( NOT DEFINED CPPREST_ROOT )

include_directories(
    ${PROJECT_SOURCE_DIR}
    src/cpprest-client
    src/cpprest-client/api
    src/cpprest-client/model
    ${CPPREST_INCLUDE_DIR}
    ${Boost_INCLUDE_DIRS}
    ${OPENSSL_INCLUDE_DIR})

set(SOURCE_FILES
    src/cpprest-client/ApiClient.cpp
    src/cpprest-client/ApiConfiguration.cpp
    src/cpprest-client/ApiException.cpp
    src/cpprest-client/HttpContent.cpp
    src/cpprest-client/JsonBody.cpp
    src/cpprest-client/ModelBase.cpp
    src/cpprest-client/MultipartFormData.cpp
    src/cpprest-client/Object.cpp
    src/cpprest-client/api/AttachmentsApi.cpp
    src/cpprest-client/api/AuthenticationApi.cpp
    src/cpprest-client/api/FlpApi.cpp
    src/cpprest-client/api/LogsApi.cpp
    src/cpprest-client/api/OverviewApi.cpp
    src/cpprest-client/api/RunsApi.cpp
    src/cpprest-client/api/SettingApi.cpp
    src/cpprest-client/api/SubsystemsApi.cpp
    src/cpprest-client/api/UsersApi.cpp
    src/cpprest-client/model/CreateAttachmentDto.cpp
    src/cpprest-client/model/CreateFlpDto.cpp
    src/cpprest-client/model/CreateLogDto.cpp
    src/cpprest-client/model/CreateRunDto.cpp
    src/cpprest-client/model/CreateSubSystemPermissionDto.cpp
    src/cpprest-client/model/FlpRole.cpp
    src/cpprest-client/model/LinkLogToRunDto.cpp
    src/cpprest-client/model/LinkRunToLogDto.cpp
    src/cpprest-client/model/Log.cpp
    src/cpprest-client/model/PatchFlpDto.cpp
    src/cpprest-client/model/PatchRunDto.cpp
    src/cpprest-client/model/Run.cpp
    src/cpprest-client/model/SubSystem.cpp
    src/cpprest-client/model/User.cpp
    src/JiskefetApi.cpp
    src/JiskefetFactory.cpp)

message (SOURCE_FILES ${SOURCE_FILES})

add_library(${PROJECT_NAME} ${SOURCE_FILES})

add_executable(jiskefet-api-cpp-example src/Example.cpp)

target_link_libraries(jiskefet-api-cpp-example 
    ${PROJECT_NAME} 
    ${CPPREST_LIBRARIES} 
    ${Boost_LIBRARIES} 
    ${OPENSSL_LIBRARIES} 
    pthread)

install(TARGETS jiskefet-api-cpp-example JiskefetApiCpp
    RUNTIME DESTINATION bin
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib/static)

install(DIRECTORY src/ 
    DESTINATION include/jiskefet-api-cpp
    FILES_MATCHING PATTERN "*.h")
